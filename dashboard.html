<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</title>
    <style>
        .card { background: white; padding: 20px; border-radius: 12px; margin: 20px auto; max-width: 600px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        .balance { font-size: 24px; color: green; font-weight: bold; }
    </style>
</head>
<body>
    <div class="card">
        <h2>Ù…Ø­ÙØ¸ØªÙƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ© ğŸ’³</h2>
        <p>Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ù…ØªØ§Ø­: <span id="balance" class="balance">0.00</span> Ø¬.Ù…</p>
        <hr>
        <button onclick="location.href='index.html'">Ø§Ù„Ø±Ø¬ÙˆØ¹ Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
        <button onclick="localStorage.clear(); location.href='login.html'">ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬</button>
    </div>

    <script>
        async function loadData() {
            const token = localStorage.getItem('token');
            if(!token) { window.location.href = 'login.html'; return; }
            
            const res = await fetch('/api/wallet', {
                headers: { 'Authorization': 'Bearer ' + token }
            });
            const data = await res.json();
            if(data.available_balance !== undefined) {
                document.getElementById('balance').innerText = data.available_balance;
            }
        }
        window.onload = loadData;
    </script>
</body>
</html>
